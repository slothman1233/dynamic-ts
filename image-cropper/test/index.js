!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function n(e,o,r){e.addEventListener?e.addEventListener(o,r,!1):(e["e"+o+r]=r,e[o+r]=function(){e["e"+o+r](window.event)},e.attachEvent("on"+o,e[o+r]))}function c(e,o,r){e.detachEvent?(e.detachEvent("on"+o,e[o+r]),e[o+r]=null):e.removeEventListener(o,r,!1)}function o(e){return!!e&&"object"==typeof e}function p(e){return o(e)&&"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object}var i=function(e){return o(e)?Object.keys(e):[]};function a(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var t={};return e.forEach(function(e){var o,r;e&&(r=function(e,o){p(e)?(p(t[o])||(t[o]={}),t[o]=a(t[o],e)):t[o]=e},i(o=e).forEach(function(e){return r(o[e],e)}))}),t}var s={throwWhitespace:"类具有非法空格字符",notElement:"不是元素"};var h="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(e,o){if(!e||!o)return"";var r,t;if("function"==typeof h.getComputedStyle)return(t=h.getComputedStyle(e))?t[o]:"";"opacity"===o&&(t=e.currentStyle.filter,t=(r=/^alpha\(opacity=(\d+(?:\.\d+)?)\)$/i).test(t)?r.exec(t)[1]/100:1);return(t=e.currentStyle[o])?/^(-?\d+(\.\d+)?)(px|pt|rem|em)?$/i.test(t)?parseFloat(t):t:""}function r(e){var o=e,r=function(e){try{var o,r=Object.prototype.toString.call(e);if("[object Object]"==r)try{e.constructor&&(r=-1!=(o=e.constructor.toString()).indexOf("Array")?"[object Array]":-1!=o.indexOf("HTMLCollection")?"[object NodeList]":-1!=o.indexOf("function")&&-1!=o.indexOf("Object()")?"[object Object]":o)}catch(e){return"[object Null]"}else"[object HTMLCollection]"==r&&(r="[object NodeList]");return r}catch(e){return"variable is not defined."}}(e);switch(r){case"[object String]":case"[object NodeList]":case"[object Array]":for(var t=0;t<o.length;t++)"none"===l(o[t],"display")&&(o[t].style.display="block");break;default:if(!/\[object HTML.*Element\]/.test(r))throw new Error(""+s.notElement);"none"===l(e,"display")&&(e.style.display="block")}return e}var t=".cropper-input-box{width:108px;height:86px;position:relative;left:50%;top:50%;transform:translate(-50%,-50%);\n                                    background:url(https://imgs.wbp5.com/api/secrecymaster/html_up/2018/12/20181222150023236.png) no-repeat;background-size:100% 100%;}\n                                .cropper-input-box .cropper-input{width:108px;height:86px;position:absolute;top:0;left:0;display:block;opacity:0;}\n                                .cropper-container {font-size: 0;line-height: 0;position: relative;-webkit-user-select: none;-moz-user-select: none;\n                                    -ms-user-select: none;user-select: none;direction: ltr;-ms-touch-action: none;touch-action: none;display:none;}\n                                .cropper-container img {display: block;min-width: 0 !important;max-width: none !important;min-height: 0 !important;\n                                    max-height: none !important;width: 100%;height: auto;image-orientation: 0deg}\n                                .cropper-wrap-box,.cropper-canvas,.cropper-drag-box,.cropper-crop-box,.cropper-modal {\n                                    position: absolute;top: 0;right: 0;bottom: 0;left: 0;}\n                                .cropper-wrap-box {overflow: hidden;}\n                                .cropper-drag-box {opacity: 0;background-color: #fff;}\n                                .cropper-modal {opacity: .5;background-color: #000;} \n                                .cropper-view-box {display: block;overflow: hidden;width: 100%;height: 100%;outline: 1px solid #39f;outline-color: rgba(51, 153, 255, 0.75);} \n                                .cropper-dashed {position: absolute;display: block;opacity: .5;border: 0 dashed #eee}\n                                .cropper-dashed.dashed-h {top: 33.33333%;left: 0;width: 100%;height: 33.33333%;border-top-width: 1px;border-bottom-width: 1px}\n                                .cropper-dashed.dashed-v {top: 0;left: 33.33333%;width: 33.33333%;height: 100%;border-right-width: 1px;border-left-width: 1px}\n                                .cropper-center {position: absolute;top: 50%;left: 50%;display: block;width: 0;height: 0;opacity: .75} \n                                .cropper-center:before,.cropper-center:after {position: absolute;display: block;content: ' ';background-color: #eee}\n                                .cropper-center:before {top: 0;left: -3px;width: 7px;height: 1px}\n                                .cropper-center:after {top: -3px;left: 0;width: 1px;height: 7px}  \n                                .cropper-face,.cropper-line,.cropper-point {\n                                    position: absolute;display: block;width: 100%;height: 100%;opacity: .1;}\n                                .cropper-face {top: 0;left: 0;background-color: #fff;}\n                                .cropper-line {background-color: #39f}\n                                .cropper-line.line-e {top: 0;right: -3px;width: 5px;cursor: e-resize}\n                                .cropper-line.line-n {top: -3px;left: 0;height: 5px;cursor: n-resize}\n                                .cropper-line.line-w {top: 0;left: -3px;width: 5px;cursor: w-resize}\n                                .cropper-line.line-s {bottom: -3px;left: 0;height: 5px;cursor: s-resize}\n                                .cropper-point {width: 5px;height: 5px;opacity: .75;background-color: #39f}\n                                .cropper-point.point-e {top: 50%;right: -3px;margin-top: -3px;cursor: e-resize}\n                                .cropper-point.point-n {top: -3px;left: 50%;margin-left: -3px;cursor: n-resize} \n                                .cropper-point.point-w {top: 50%;left: -3px;margin-top: -3px;cursor: w-resize}\n                                .cropper-point.point-s {bottom: -3px;left: 50%;margin-left: -3px;cursor: s-resize}\n                                .cropper-point.point-ne {top: -3px;right: -3px;cursor: ne-resize}\n                                .cropper-point.point-nw {top: -3px;left: -3px;cursor: nw-resize}\n                                .cropper-point.point-sw {bottom: -3px;left: -3px;cursor: sw-resize}\n                                .cropper-point.point-se {right: -3px;bottom: -3px;width: 20px;height: 20px;cursor: se-resize;opacity: 1}  \n                                @media (min-width: 768px) {\n                                    .cropper-point.point-se {width: 15px;height: 15px}\n                                }  \n                                @media (min-width: 992px) { \n                                    .cropper-point.point-se {width: 10px;height: 10px}\n                                }\n                                @media (min-width: 1200px) {\n                                    .cropper-point.point-se {width: 5px;height: 5px;opacity: .75}\n                                }\n                                .cropper-point.point-se:before {\n                                    position: absolute;right: -50%;bottom: -50%;display: block;width: 200%;height: 200%;content: ' ';opacity: 0;background-color: #39f\n                                }  \n                                .cropper-invisible {opacity: 0;} \n                                .cropper-bg {\n                                    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');\n                                }\n                                .cropper-hide {position: absolute;display: block;width: 0;height: 0;}\n                                .cropper-hidden {display: none !important;}\n                                .cropper-move {cursor: move;}\n                                .cropper-auto{cursor:auto !import;}\n                                .cropper-crop {cursor: crosshair; }\n                                .cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point {cursor: not-allowed;} ";function d(e,o){var r=this,t=new Image;t.src=e,t.onload=function(){var e={width:t.width,height:t.height};return o?o.call(r,e):e}}function g(e,o){e.style.transform=o,e.style.msTransform=o,e.style.mozTransform=o,e.style.webkitTransform=o,e.style.oTransform=o}var e=(m.prototype.initOption=function(e){this.option=a({},{addStyle:!0,zoomMultiple:20,zoomScale:.05,cropperBoxWidth:200,cropperBoxHeight:200,fixedCropSize:!1,moveStep:10,getImgCallback:null},e)},m.prototype.initFn=function(){var e,o=this,r=o.option.fixedCropSize?2:1;if(o.cropperScale=o.option.cropperBoxWidth/o.option.cropperBoxHeight,o.option.ele.innerHTML='<div class="cropper-container">\n                <div class="cropper-wrap-box">\n                    <div class="cropper-canvas"></div>\n                </div>\n                <div class="cropper-drag-box"></div>\n                <div class="cropper-crop-box">\n                    <span class="cropper-view-box"></span>\n                    <span class="cropper-dashed dashed-h"></span>\n                    <span class="cropper-dashed dashed-v"></span>\n                    <span class="cropper-center"></span>\n                    <span class="cropper-face"></span>\n                    <span class="cropper-line line-e'+(1==(e=r)?"":" cropper-auto")+'" data-action="e"></span>\n                    <span class="cropper-line line-n'+(1===e?"":" cropper-auto")+'" data-action="n"></span>\n                    <span class="cropper-line line-w'+(1===e?"":" cropper-auto")+'" data-action="w"></span>\n                    <span class="cropper-line line-s'+(1===e?"":" cropper-auto")+'" data-action="s"></span>\n                    '+(1===e?'<span class="cropper-point point-e" data-action="e"></span>\n                                <span class="cropper-point point-n" data-action="n"></span>\n                                <span class="cropper-point point-w" data-action="w"></span>\n                                <span class="cropper-point point-s" data-action="s"></span>\n                                <span class="cropper-point point-ne" data-action="ne"></span>\n                                <span class="cropper-point point-nw" data-action="nw"></span>\n                                <span class="cropper-point point-sw" data-action="sw"></span>\n                                <span class="cropper-point point-se" data-action="se"></span>':"")+"\n                </div>\n            </div>",o.getDom(),o.getContainerStyle(),o.option.cropInitComplete&&o.option.cropInitComplete.call(o),o.option.src&&(o.fileSrc=o.option.src,d.call(o,o.fileSrc,o.inputFn)),o.option.inputBox){if("INPUT"!==o.option.inputBox.tagName||"file"!==o.option.inputBox.type)return;o.$inputBox=o.option.inputBox,o.addInputEvent()}o.stateCallback()},m.prototype.getBase64=function(e){var o,r=this;0<=e.indexOf("http://")||0<=e.indexOf("https://")?(window.URL=window.URL||window.webkitURL,(o=new XMLHttpRequest).open("get",e,!0),o.responseType="blob",o.onload=function(){var e,o;200==this.status&&(e=this.response,(o=new FileReader).onloadend=function(e){r.fileSrc=e.target.result,d.call(r,r.fileSrc,r.inputFn)},o.readAsDataURL(e))},o.send()):(r.fileSrc=e,d.call(r,r.fileSrc,r.inputFn))},m.prototype.changeImg=function(e){this.fileSrc=e,d.call(this,this.fileSrc,this.inputFn)},m.prototype.getContainerStyle=function(){var e=this;e.$cropperContainer.className+=" cropper-bg",e.$cropperContainer.style.width=e.width+"px",e.$cropperContainer.style.height=e.height+"px",e.$cropperDragBox.className+=" cropper-modal cropper-move",e.$cropperFaceBox.className+=" cropper-move"},m.prototype.getDom=function(){var e=this,o=e.option.ele;e.width=o.clientWidth,e.height=o.clientHeight,e.$cropperContainer=o.getElementsByClassName("cropper-container")[0],e.$cropperCropBox=o.getElementsByClassName("cropper-crop-box")[0],e.$cropperViewBox=e.$cropperCropBox.getElementsByClassName("cropper-view-box")[0],e.$cropperCanvasBox=o.getElementsByClassName("cropper-canvas")[0],e.$cropperDragBox=o.getElementsByClassName("cropper-drag-box")[0],e.$cropperFaceBox=e.$cropperCropBox.getElementsByClassName("cropper-face")[0],e.$cropperLineE=e.$cropperCropBox.getElementsByClassName("line-e")[0],e.$cropperPointE=e.$cropperCropBox.getElementsByClassName("point-e")[0],e.$cropperPointNe=e.$cropperCropBox.getElementsByClassName("point-ne")[0],e.$cropperLineN=e.$cropperCropBox.getElementsByClassName("line-n")[0],e.$cropperPointN=e.$cropperCropBox.getElementsByClassName("point-n")[0],e.$cropperPointNw=e.$cropperCropBox.getElementsByClassName("point-nw")[0],e.$cropperLineW=e.$cropperCropBox.getElementsByClassName("line-w")[0],e.$cropperPointW=e.$cropperCropBox.getElementsByClassName("point-w")[0],e.$cropperPointSw=e.$cropperCropBox.getElementsByClassName("point-sw")[0],e.$cropperLineS=e.$cropperCropBox.getElementsByClassName("line-s")[0],e.$cropperPointS=e.$cropperCropBox.getElementsByClassName("point-s")[0],e.$cropperPointSe=e.$cropperCropBox.getElementsByClassName("point-se")[0]},m.prototype.addInputEvent=function(){var t=this;n(t.$inputBox,"input",function(e){var o,r=function(){var e=window.navigator&&window.navigator.userAgent||"";if(-1<e.indexOf("compatible")&&-1<e.indexOf("MSIE")){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var o=parseFloat(RegExp.$1);return 7<=o?o:6}return-1<e.indexOf("Edge")?"edge":-1<e.indexOf("Trident")&&-1<e.indexOf("rv:11.0")?11:-1}();"edge"!==r&&0<r&&r<10?t.fileSrc=e.target.value:(o=this.files[0],t.fileSrc=o?URL.createObjectURL(o):""),t.option.inputImgComplete&&t.option.inputImgComplete.call(t,this),e.target.type="text",e.target.type="file",t.fileSrc&&""!==t.fileSrc&&d.call(t,t.fileSrc,t.inputFn)})},m.prototype.inputFn=function(e){var o=this;o.dragPosition={x:0,y:0},o.zoom=1,o.zoomNumber=0,o.computeCanvasSize(e),o.computeCropperSize(),r(o.$cropperContainer),o.addCropperEvent(),o.previewImg()},m.prototype.previewImg=function(){var e=this;if(e.option.previewBox)if(0<e.previewObj.length)for(var o=0;o<e.previewObj.length;o++)e.previewObj[o].imgBox.src=e.fileSrc,e.getPreviewImgSize(o);else{e.previewList="[object HTMLCollection]"===Object.prototype.toString.call(e.option.previewBox)||"[object Array]"===Object.prototype.toString.call(e.option.previewBox)?e.option.previewBox:[e.option.previewBox];for(var r=0;r<e.previewList.length;r++)e.addPreviewImg(e.previewList[r],r)}},m.prototype.addPreviewImg=function(e,o){this.previewObj.push({previewWidth:e.clientWidth,previewHeight:e.clientHeight,imgBox:document.createElement("img")});var r=this.previewObj[o].imgBox;r.src=this.fileSrc,this.getPreviewImgSize(o),e.appendChild(r)},m.prototype.updatePreviewImgSize=function(){if(0!==this.previewObj.length)for(var e=0;e<this.previewObj.length;e++)this.getPreviewImgSize(e)},m.prototype.getPreviewImgSize=function(e){var o=this,r=o.previewObj[e].imgBox;r.style.width=o.canvasSize.width*o.previewObj[e].previewWidth/o.cropperSize.width+"px",r.style.height=o.canvasSize.height*o.previewObj[e].previewHeight/o.cropperSize.height+"px",g(r,"translate("+(o.canvasSize.x-o.cropperSize.x)*o.previewObj[e].previewWidth/o.cropperSize.width+"px,\n                            "+(o.canvasSize.y-o.cropperSize.y)*o.previewObj[e].previewHeight/o.cropperSize.height+"px)")},m.prototype.computeCanvasSize=function(e){var o=this;o.imgSize.width=e.width,o.imgSize.height=e.height;var r=e.width/e.height,t=o.width,p=o.height;o.width*r>o.height?p=o.width/r:t=o.height*r,o.canvasSize={width:t,height:p,x:o.width>t?(o.width-t)/2:0,y:o.height>p?(o.height-p)/2:0},o.initCanvasSize=JSON.parse(JSON.stringify(o.canvasSize)),o.addImage(t,p),o.getCanvasSize()},m.prototype.computeCropperSize=function(){var e=this;e.cropperSize={width:e.option.cropperBoxWidth,height:e.option.cropperBoxHeight,x:(e.width-e.option.cropperBoxWidth)/2,y:(e.height-e.option.cropperBoxHeight)/2},e.getCropperSize()},m.prototype.addImage=function(e,o){var r='<img src="'+this.fileSrc+'" style="width:'+e+"px;height:"+o+'px" />';this.$cropperViewBox.innerHTML=r,this.$cropperCanvasBox.innerHTML=r},m.prototype.getCanvasSize=function(e){var o,r=this;r.$cropperCanvasBox.style.width=r.canvasSize.width+"px",r.$cropperCanvasBox.style.height=r.canvasSize.height+"px",g(r.$cropperCanvasBox,"translate("+r.canvasSize.x+"px, "+r.canvasSize.y+"px)"),e&&((o=r.$cropperCanvasBox.getElementsByTagName("img")[0]).style.width=r.canvasSize.width+"px",o.style.height=r.canvasSize.height+"px")},m.prototype.getCropperSize=function(){var e=this;e.$cropperCropBox.style.width=e.cropperSize.width+"px",e.$cropperCropBox.style.height=e.cropperSize.height+"px",g(e.$cropperCropBox,"translate("+e.cropperSize.x+"px, "+e.cropperSize.y+"px)"),e.getCropperImgSize()},m.prototype.getCropperImgSize=function(e){var o=this,r=o.$cropperCropBox.getElementsByTagName("img")[0];g(r,"translate("+(o.canvasSize.x-o.cropperSize.x)+"px, "+(o.canvasSize.y-o.cropperSize.y)+"px)"),e&&(r.style.width=o.canvasSize.width+"px",r.style.height=o.canvasSize.height+"px")},m.prototype.addCropperEvent=function(){function e(e){var o=e||window.event;t.mousewheelFn.call(t,o),t.updatePreviewImgSize()}var t=this,o=window.navigator&&window.navigator.userAgent||"";function r(e){var o=e||window.event;t.dragDom=o.target,t.dragPosition={x:o.clientX,y:o.clientY}}function p(e){var o,r;t.dragDom&&(r={x:(o=e||window.event).clientX-t.dragPosition.x,y:o.clientY-t.dragPosition.y},t.dragPosition.x=o.clientX,t.dragPosition.y=o.clientY,t.mousemoveTypeFn(r),t.updatePreviewImgSize())}function i(){t.dragDom=null,t.dragPosition={x:0,y:0}}/Firefox/i.test(o)?(c(t.option.ele,"DOMMouseScroll",e),n(t.option.ele,"DOMMouseScroll",e)):(c(t.option.ele,"mousewheel",e),n(t.option.ele,"mousewheel",e)),c(t.option.ele,"mousedown",r),n(t.option.ele,"mousedown",r),c(document,"mousemove",p),n(document,"mousemove",p),c(document,"mouseup",i),n(document,"mouseup",i)},m.prototype.mousewheelFn=function(e){try{e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1}catch(e){}var o,r=this;try{o=e.wheelDelta||-e.detail}catch(e){}r.zoomNumber=0<o?r.option.zoomScale:-r.option.zoomScale;var t=r.zoom+r.zoomNumber;r.imgZoomFn(t)},m.prototype.imgZoomFn=function(e){var o=this;if(e<1/o.option.zoomMultiple||e>o.option.zoomMultiple)return"已超出最大缩放尺寸";o.zoom=e,o.canvasSize.width=o.initCanvasSize.width*o.zoom,o.canvasSize.height=o.initCanvasSize.height*o.zoom,o.canvasSize.x-=o.initCanvasSize.width*o.zoomNumber/2,o.canvasSize.y-=o.initCanvasSize.height*o.zoomNumber/2,o.getCanvasSize(!0),o.getCropperImgSize(!0)},m.prototype.mousemoveTypeFn=function(e){var o=this;if(o.option.fixedCropSize)switch(o.dragDom){case o.$cropperDragBox:o.mousemoveImgFn(e);break;case o.$cropperFaceBox:o.mousemoveCropperFn(e)}else switch(o.dragDom){case o.$cropperDragBox:o.mousemoveImgFn(e);break;case o.$cropperFaceBox:o.mousemoveCropperFn(e);break;case o.$cropperLineE:case o.$cropperPointE:o.cropperRight(e),o.cropperTransform();break;case o.$cropperLineS:case o.$cropperPointS:o.cropperDown(e),o.cropperTransform();break;case o.$cropperPointSe:o.cropperRightDown(e);break;case o.$cropperPointNe:o.cropperRightUp(e),o.cropperTransform();break;case o.$cropperLineN:case o.$cropperPointN:o.cropperUp(e),o.cropperTransform();break;case o.$cropperLineW:case o.$cropperPointW:o.cropperLeft(e),o.cropperTransform();break;case o.$cropperPointNw:o.cropperLeftUp(e),o.cropperTransform();break;case o.$cropperPointSw:o.cropperLeftDown(e),o.cropperTransform()}},m.prototype.moveReturn=function(){this.dragDom=null,this.dragPosition={x:0,y:0}},m.prototype.cropperRight=function(e){var o=this;o.cropperSize.y-e.x/(2*o.cropperScale)<=0||o.cropperRightDown(e)&&(o.cropperSize.y-=e.x/(2*o.cropperScale))},m.prototype.cropperDown=function(e){var o=this;o.cropperSize.x-e.y*o.cropperScale/2<=0||o.cropperSize.width+e.y*o.cropperScale/2+o.cropperSize.x>=o.width||o.cropperSize.height+e.y+o.cropperSize.y>=o.height||o.cropperSize.width+e.y*o.cropperScale<=10||o.cropperSize.height+e.y<=10||(o.cropperSize.x-=e.y*o.cropperScale/2,o.cropperSize.width+=e.y*o.cropperScale,o.cropperSize.height+=e.y,o.$cropperCropBox.style.width=o.cropperSize.width+"px",o.$cropperCropBox.style.height=o.cropperSize.height+"px")},m.prototype.cropperUp=function(e){var o=this;o.cropperSize.x+e.y*o.cropperScale/2<=0||o.cropperRightUp(e)&&(o.cropperSize.x+=e.y*o.cropperScale/2)},m.prototype.cropperLeft=function(e){var o=this;o.cropperSize.y+e.x/(2*o.cropperScale)<=0||o.cropperLeftDown(e)&&(o.cropperSize.y+=e.x/(2*o.cropperScale))},m.prototype.cropperRightDown=function(e){var o=this;return!(o.cropperSize.width+e.x<=10||o.cropperSize.height+e.x/o.cropperScale<=10||o.cropperSize.width+e.x+o.cropperSize.x>=o.width||o.cropperSize.height+e.x/o.cropperScale+o.cropperSize.y>=o.height||(o.cropperSize.width+=e.x,o.cropperSize.height+=e.x/o.cropperScale,o.$cropperCropBox.style.width=o.cropperSize.width+"px",o.$cropperCropBox.style.height=o.cropperSize.height+"px",0))},m.prototype.cropperLeftDown=function(e){var o=this;return!(o.cropperSize.width-e.x<=10||o.cropperSize.height-e.x/o.cropperScale<=10||o.cropperSize.x+e.x<=0||o.cropperSize.y+o.cropperSize.height-e.x/o.cropperScale>=o.height||(o.cropperSize.x+=e.x,o.cropperSize.width-=e.x,o.cropperSize.height-=e.x/o.cropperScale,o.$cropperCropBox.style.width=o.cropperSize.width+"px",o.$cropperCropBox.style.height=o.cropperSize.height+"px",0))},m.prototype.cropperRightUp=function(e){var o=this;return!(o.cropperSize.width-e.y*o.cropperScale<=10||o.cropperSize.height-e.y<=10||o.cropperSize.y+e.y<=0||o.cropperSize.x+o.cropperSize.width-e.y*o.cropperScale>=o.width||(o.cropperSize.y+=e.y,o.cropperSize.width-=e.y*o.cropperScale,o.cropperSize.height-=e.y,o.$cropperCropBox.style.width=o.cropperSize.width+"px",o.$cropperCropBox.style.height=o.cropperSize.height+"px",0))},m.prototype.cropperLeftUp=function(e){var o=this;return!(o.cropperSize.width-e.y*o.cropperScale<=10||o.cropperSize.height-e.y<=10||o.cropperSize.y+e.y<=0||o.cropperSize.x+e.y*o.cropperScale<=0||(o.cropperSize.x+=e.y*o.cropperScale,o.cropperSize.y+=e.y,o.cropperSize.width-=e.y*o.cropperScale,o.cropperSize.height-=e.y,o.$cropperCropBox.style.width=o.cropperSize.width+"px",o.$cropperCropBox.style.height=o.cropperSize.height+"px",0))},m.prototype.cropperTransform=function(){g(this.$cropperCropBox,"translate("+this.cropperSize.x+"px, "+this.cropperSize.y+"px)"),this.getCropperImgSize()},m.prototype.mousemoveImgFn=function(e){var o=this;o.initCanvasSize.x=o.canvasSize.x+=e.x,o.initCanvasSize.y=o.canvasSize.y+=e.y,g(o.$cropperCanvasBox,"translate("+o.canvasSize.x+"px, "+o.canvasSize.y+"px)"),o.getCropperImgSize()},m.prototype.mousemoveCropperFn=function(e){var o=this,r=o.width-o.cropperSize.width-1,t=o.height-o.cropperSize.height-1,p=o.cropperSize.x+e.x,i=o.cropperSize.y+e.y;o.cropperSize.x=p<1?1:r<p?r:p,o.cropperSize.y=i<1?1:t<i?t:i,g(o.$cropperCropBox,"translate("+o.cropperSize.x+"px, "+o.cropperSize.y+"px)"),o.getCropperImgSize()},m.prototype.stateCallback=function(){var o=this;o.magnifyFn=function(){var e;o.fileSrc&&(o.zoomNumber=o.option.zoomScale,e=o.zoom+o.zoomNumber,o.imgZoomFn(e),o.updatePreviewImgSize())},o.shrinkFn=function(){var e;o.fileSrc&&(o.zoomNumber=-o.option.zoomScale,e=o.zoom+o.zoomNumber,o.imgZoomFn(e),o.updatePreviewImgSize())},o.moveRightFn=function(){var e;o.fileSrc&&(e={x:o.option.moveStep,y:0},o.mousemoveCropperFn(e),o.updatePreviewImgSize())},o.moveUpFn=function(){var e;o.fileSrc&&(e={x:0,y:-o.option.moveStep},o.mousemoveCropperFn(e),o.updatePreviewImgSize())},o.moveLeftFn=function(){var e;o.fileSrc&&(e={x:-o.option.moveStep,y:0},o.mousemoveCropperFn(e),o.updatePreviewImgSize())},o.moveDownFn=function(){var e;o.fileSrc&&(e={x:0,y:o.option.moveStep},o.mousemoveCropperFn(e),o.updatePreviewImgSize())},o.option.magnifyBtn&&n(o.option.magnifyBtn,"click",o.magnifyFn),o.option.shrinkBtn&&n(o.option.shrinkBtn,"click",o.shrinkFn),o.option.moveLeftBtn&&n(o.option.moveLeftBtn,"click",o.moveLeftFn),o.option.moveRightBtn&&n(o.option.moveRightBtn,"click",o.moveRightFn),o.option.moveUpBtn&&n(o.option.moveUpBtn,"click",o.moveUpFn),o.option.moveDownBtn&&n(o.option.moveDownBtn,"click",o.moveDownFn),o.option.getImgBtn&&n(o.option.getImgBtn,"click",function(){o.getCropSize(o.option.getImgCallback)})},m.prototype.getCropSize=function(r){var t=this,e=document.createElement("canvas"),p=t.imgSize.width/t.canvasSize.width,o=t.$cropperCropBox.getElementsByTagName("img")[0].src,i=new Image;i.src=o,i.crossorigin="anonymous",e.width=t.cropperSize.width*p,e.height=t.cropperSize.height*p;var n=e.getContext("2d");i.onload=function(){n.drawImage(i,(t.cropperSize.x-t.canvasSize.x)*p,(t.cropperSize.y-t.canvasSize.y)*p,t.cropperSize.width*p,t.cropperSize.height*p,0,0,t.cropperSize.width*p,t.cropperSize.height*p);try{r&&r.call(t,e.toDataURL("image/png"))}catch(e){var o={width:t.cropperSize.width*p,height:t.cropperSize.height*p,x:(t.cropperSize.x-t.canvasSize.x)*p,y:(t.cropperSize.y-t.canvasSize.y)*p,src:t.fileSrc};r&&r.call(t,o)}}},m);function m(e){this.dragPosition={x:0,y:0},this.zoom=1,this.imgSize={},this.canvasSize={},this.initCanvasSize={},this.cropperSize={},this.previewObj=[],this.magnifyFn=function(){},this.shrinkFn=function(){},this.moveLeftFn=function(){},this.moveRightFn=function(){},this.moveUpFn=function(){},this.moveDownFn=function(){},this.initOption(e),this.option.addStyle&&function(){for(var e=document.getElementsByTagName("style"),o=0;o<e.length;o++)if("imageCropper"===e[o].getAttribute("name"))return;var r=document.createElement("style");r.tyle="text/css",r.setAttribute("name","imageCropper"),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r)}(),this.initFn()}var u=document.getElementById("img_cropper"),x=document.getElementById("fd"),v=document.getElementById("sx"),S=document.getElementById("yy"),y=document.getElementById("zy"),w=document.getElementById("sy"),f=document.getElementById("xy");new e({ele:u,inputBox:document.getElementById("input_box"),src:"https://img.wbp5.com/upload/images/master/2020/08/18/111237247.png",previewBox:document.getElementsByClassName("yl"),cropperBoxWidth:300,cropperBoxHeight:200,magnifyBtn:x,shrinkBtn:v,moveLeftBtn:y,moveRightBtn:S,moveUpBtn:w,moveDownBtn:f,getImgBtn:document.getElementById("getCrop"),getImgCallback:function(e){document.getElementById("show_img").src=e},inputImgComplete:function(){this.fileSrc=""}})});
