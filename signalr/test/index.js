!function(n){"function"==typeof define&&define.amd?define(n):n()}(function(){"use strict";function c(n,t){var e=document.createElement("script");e.type="text/javaScript",e.readyState?e.onreadystatechange=function(){"loaded"!=e.readyState&&"complete"!=e.readyState||(e.onreadystatechange=null,t())}:e.onload=function(){t()},e.src=n,document.getElementsByTagName("head")[0].appendChild(e)}var i=function(o){this.isInvoke=!0,this.signalrSettimeout=null;var t=this;if(this.hubConnection=o.hubConnection||"//fxchatnews.fx110.com",this.connHunProxyOn=o.connHunProxyOn||"ReceiverQuote",this.createHubProxy=o.createHubProxy||"MT4Hub",this.jsonp=o.jsonp||!0,function(n){void 0===n&&(n=9);var t,e=n,o=navigator.userAgent.toLowerCase(),c=-1<o.indexOf("msie");return document.getElementById("browser-box"),!(c&&(t=o.match(/msie ([\d.]+)/)[1],parseInt(t)<=e))}()?this.transports=o.transports||["webSockets"]:this.transports=o.transports||["webSockets","longPolling"],this.connection=$.hubConnection(this.hubConnection),this.connHunProxy=this.connection.createHubProxy(this.createHubProxy),o.qs&&(this.connection.qs=o.qs),0<=this.connHunProxyOn.indexOf(","))for(var n=this.connHunProxyOn.split(","),e=0;e<n.length;e++)!function(e){this.connHunProxy.on(e,function(t){setTimeout(function(){try{o.connectionSuccessCallback&&o.connectionSuccessCallback([e,t.tran()])}catch(n){o.connectionSuccessCallback&&o.connectionSuccessCallback([e,t])}},100)})}(n[e]);else this.connHunProxy.on(this.connHunProxyOn,function(t){setTimeout(function(){try{o.connectionSuccessCallback&&o.connectionSuccessCallback(t.tran())}catch(n){o.connectionSuccessCallback&&o.connectionSuccessCallback(t)}},100)});this.connection.start({jsonp:this.jsonp,transport:this.transports}).done(function(){o.afterConnectionCallback&&o.afterConnectionCallback(t)}),this.connection.error(function(n){}),this.connection.stateChanged(function(n){o.stateChangedCallback&&o.stateChangedCallback(n),n.newState==$.signalR.connectionState.reconnecting||n.newState==$.signalR.connectionState.connected?clearTimeout(t.signalrSettimeout):n.newState==$.signalR.connectionState.connecting||(n.newState,$.signalR.connectionState.disconnected)}),t.connection.disconnected(function(){o.disconnected&&o.disconnected()}),t.start=function(n){t.connection.start({jsonp:!0,transport:t.transports}).done(function(){n?n(t):o.afterConnectionCallback(t)})},t.stop=function(){t.connection.stop()}};function n(n){this.data=n,this.init()}new(n.prototype.init=function(){var e,n=this;(e=new Image).src="https://www.fx110.com//images/Annbgline.jpg?"+new Date,new Promise(function(n,t){e.onload=n,e.onerror=t}).then(function(){!function(n){for(var t=document.getElementsByTagName("script"),e=!1,o=0;o<t.length;o++)if(0<=t[o].src.indexOf("signalr/hubs")||n.hubjs&&0<=t[o].src.indexOf(n.hubjs)){e=!0;break}e?new i(n):c("https://gajsapi.fx110.com/script/public/signalr/signalrjs/2.2.2/jquery.signalR-2.2.2.min.js",function(){c(n.hubjs||n.hubConnection+"/signalr/hubs"||"https//fxchatnews.fx110.com/signalr/hubs",function(){new i(n)})})}(n.data)},function(){n.data.noNetworkCallback?n.data.noNetworkCallback.call(n):setTimeout(function(){n.init.call(n)},3e3)})},n)({hubConnection:"https://bspush.wbp5.com/BrokersShow/hubs",connHunProxyOn:"Commit",createHubProxy:"BrokersShowHub",qs:{userkey:"userkey"},connectionSuccessCallback:function(){},afterConnectionCallback:function(){},stateChangedCallback:function(n){},disconnected:function(){},noNetworkCallback:function(){}})});
