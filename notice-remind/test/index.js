!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";function e(t){return!!t&&"object"==typeof t}function o(t){return e(t)&&"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}var t=function(t){return e(t)?Object.keys(t):[]};function c(e,n){t(e).forEach(function(t){return n(e[t],t)})}function s(t){return!t||t.length<=0?"":/\[object HTML.*Element\]/.test(Object.prototype.toString.call(t))?t:(n=t,"[object String]"!==Object.prototype.toString.call(n)?t:"window"===t?window:"document"===t?document:(0<=t.indexOf("[")&&0<t.indexOf("]")&&("["===(e=t.slice(t.indexOf("["))).charAt(0)&&e.indexOf("]")===e.length-1&&(e=e.slice(1,-1)),2===(e=e.split("=")).length?"'"!==e[1].charAt(0)&&'"'!==e[1].charAt(0)||(e[1]=e[1].slice(1,-1)):e.push(null),null!==(n=e)[1]&&(e="'"+n[1]+"'",t=t.slice(0,t.indexOf("["))+"["+n[0]+"="+e+"]")),document.querySelectorAll(t)));var e,n}function r(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event)},t.attachEvent("on"+e,t[e+n]))}var n=(i.prototype.listen=function(t,e){this.clientList[t]||(this.clientList[t]=new Array),this.clientList[t].push(e)},i.prototype.trigger=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this.clientList[t]&&0!==this.clientList[t].length&&this.clientList[t].forEach(function(t){t.apply(e,n)})},i.prototype.remove=function(t,e){if(this.clientList[t])if(e)for(var n=this.clientList[t].length-1;0<=n;n--)this.clientList[t][n]==e&&this.clientList[t].splice(n,1);else this.clientList[t].length=0},i);function i(){this.clientList={}}var l=function(){return new n},a=l();function h(t){t=t||a;if(t.path||t.composedPath)return t.path||t.composedPath&&t.composedPath();for(var e=[],n=t.target||t.srcElement;n;)e.push(n),n=n.parentElement;return e}var d=l();function u(t,e){/\[object HTML.*Element\]/.test(t)&&(t=[t]);for(var n=0;n<t.length;n++)e(n)}function f(t){var e,n,i,o;t.fn&&(e=s(t.agent),n=s(t.ele),t.agent?(e&&/\[object HTML.*Element\]/.test(e)&&(e=[e]),o=t,u(e,function(t){r(e[t],o.events,function(t){for(var e=t||d,n=h(e),i=0;i<n.length;i++){if(n[i]===this)return;if("#document"===n[i].nodeName)return;0<=function(e){var n=null;try{n=Array.prototype.slice.call(e,0)}catch(t){n=new Array;for(var i=0,o=e.length;i<o;i++)n.push(e[i])}return n}(this.querySelectorAll(o.ele)).indexOf(n[i])&&o.fn(n[i],e)}})})):(/\[object HTML.*Element\]/.test(n)&&(n=[n]),i=t,u(n,function(t){r(n[t],i.events,function(t){var e=t||d,t=h(e);i.fn(t,e)})})))}function p(t){try{var e,n=Object.prototype.toString.call(t);if("[object Object]"==n)try{t.constructor&&(n=-1!=(e=t.constructor.toString()).indexOf("Array")?"[object Array]":-1!=e.indexOf("HTMLCollection")?"[object NodeList]":-1!=e.indexOf("function")&&-1!=e.indexOf("Object()")?"[object Object]":e)}catch(t){return"[object Null]"}else"[object HTMLCollection]"==n&&(n="[object NodeList]");return n}catch(t){return"variable is not defined."}}function m(t){this.noticeDom={},this.noticeTimeout={},this.index=0,this.showIndex=0,this.cancelKey=!0,this.noticeList=[],this.initOption={close:!1,cancel:!0,autoClose:!0,closeTime:3e3,number:1,top:195,right:23},this.option=function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i={};return t.forEach(function(t){t&&c(t,function(t,e){o(t)?(o(i[e])||(i[e]={}),i[e]=n(i[e],t)):i[e]=t})}),i}({},this.initOption,t),this.getParent(),this.addEvent()}var b=new(m.prototype.getParent=function(){this.noticeParent=document.createElement("div"),this.noticeParent.id="notice_remind_parent",this.option.bottom?this.noticeParent.style.bottom=this.option.bottom+"px":this.noticeParent.style.top=this.option.top+"px",this.option.left?this.noticeParent.style.left=this.option.left+"px":this.noticeParent.style.right=this.option.right+"px",document.body.appendChild(this.noticeParent)},m.prototype.addEvent=function(){var e=this;this.option.cancel&&f({agent:e.noticeParent,events:"click",ele:".notice_cancel",fn:function(){e.closeAll.call(e),e.cancelKey=!1,e.option.cancelCallback&&e.option.cancelCallback()}}),this.option.close&&f({agent:e.noticeParent,events:"click",ele:".notice_close_box",fn:function(t){t=t.getAttribute("type");e.closeOnce.call(e,t)}})},m.prototype.closeAll=function(){this.option.autoClose&&c(this.noticeTimeout,function(t){clearTimeout(t)}),this.noticeParent.innerHTML="",this.noticeTimeout={},this.noticeDom={},this.showIndex=0},m.prototype.closeOnce=function(t){this.noticeParent.removeChild(this.noticeDom[t]),delete this.noticeDom[t];try{clearTimeout(this.noticeTimeout[t])}catch(t){}delete this.noticeTimeout[t],this.showIndex--,this.addNextNotice.call(this)},m.prototype.getNoticeDom=function(t){var e=document.createElement("div");e.className="notice_remind notice_remind"+this.index,e.innerHTML=t,this.noticeDom[this.index]=e,this.noticeParent.appendChild(this.noticeDom[this.index]),this.autoCloseFn(this.index),this.index++,this.showIndex++,this.showIndex<this.option.number&&this.addNextNotice()},m.prototype.getNewNotice=function(t){var e=(this.option.close?'<i class="notice_close_box" type="'+this.index+'">×</i>':"")+(this.option.cancel?'<div class="notice_cancel_box"><i class="notice_cancel"></i><span>不再弹出</span></div>':"")+'\n      <div class="notice_head_box '+(this.option.cancel?"notice_head_cancel":"")+'">'+(t.headStr||"")+'</div>\n      <div class="notice_content_box">'+t.contentStr+'</div>\n      <div class="notice_bottom_box">'+(t.footStr||"")+"</div>";this.getNoticeDom(e),this.option.showCallback&&this.option.showCallback(t)},m.prototype.autoCloseFn=function(t){var e;this.option.autoClose&&((e=this).noticeTimeout[t]=setTimeout(function(){e.closeOnce.call(e,t)},this.option.closeTime))},m.prototype.addNextNotice=function(){var t;0<this.noticeList.length&&(t=this.noticeList.shift(),this.getNewNotice(t))},m.prototype.addNewNotice=function(t){if(this.cancelKey)if("[object Object]"===p(t))this.addNoice(t);else if("[object Array]"===p(t))for(var e=0;e<t.length;e++){var n=t[e];this.addNoice(n)}},m.prototype.addNoice=function(t){this.showIndex<this.option.number?this.getNewNotice(t):this.noticeList.push(t)},m)({number:3,autoClose:!1,left:50,bottom:50,showCallback:function(t){}}),v=document.getElementById("btn"),l=document.getElementById("btns"),y=0;v.addEventListener("click",function(){var t={contentStr:"内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容",headStr:"标题标题标题标题标题标题标题标题标题标题"+y,id:y};b.addNewNotice(t),y++}),l.addEventListener("click",function(){b.addNewNotice([{contentStr:"内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容",headStr:"标题标题标题标题标题标题标题标题标题标题11",id:11},{contentStr:"内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容",headStr:"标题标题标题标题标题标题标题标题标题标题12",id:12},{contentStr:"内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容",headStr:"标题标题标题标题标题标题标题标题标题标题13",id:13},{contentStr:"内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容内容",headStr:"标题标题标题标题标题标题标题标题标题标题14",id:14}])})});
